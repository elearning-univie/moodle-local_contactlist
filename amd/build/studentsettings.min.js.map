{"version":3,"sources":["../src/studentsettings.js"],"names":["define","$","ModalFactory","Templates","ModalEvents","Ajax","Notification","Str","init","courseid","create","type","types","SAVE_CANCEL","title","get_string","body","render","then","modal","getRoot","on","save","e","preventDefault","updateval","is","call","methodname","args","done","hide","location","reload","fail","exception","show","addEventListener","checkbox","checked"],"mappings":"AAAAA,OAAM,qCAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,gBAAjC,CAAmD,mBAAnD,CAAwE,WAAxE,CAAqF,mBAArF,CAA0G,UAA1G,CAAD,CACF,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAsCC,CAAtC,CAAmDC,CAAnD,CAAyDC,CAAzD,CAAuEC,CAAvE,CAA4E,CACxE,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAoB,CACtBP,CAAY,CAACQ,MAAb,CAAoB,CAChBC,IAAI,CAAET,CAAY,CAACU,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAEP,CAAG,CAACQ,UAAJ,CAAe,sBAAf,CAAuC,mBAAvC,CAFS,CAGhBC,IAAI,CAAEb,CAAS,CAACc,MAAV,CAAiB,wCAAjB,CAA2D,EAA3D,CAHU,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACrBA,CAAK,CAACC,OAAN,GAAgBC,EAAhB,CAAmBjB,CAAW,CAACkB,IAA/B,CAAqC,SAAUC,CAAV,CAAa,CAC9CA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAS,CAAGxB,CAAC,CAAC,2BAAD,CAAD,CAA+ByB,EAA/B,CAAkC,UAAlC,EAAgD,CAAhD,CAAoD,CAApE,CACArB,CAAI,CAACsB,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,kCADL,CAEPC,IAAI,CAAE,CAACpB,QAAQ,CAAEA,CAAX,CAAqBgB,SAAS,CAAEA,CAAhC,CAFC,CAGPK,IAAI,CAAE,eAAY,CACdX,CAAK,CAACY,IAAN,GACAC,QAAQ,CAACC,MAAT,EACH,CANM,CAOPC,IAAI,CAAE5B,CAAY,CAAC6B,SAPZ,CAAD,CAAV,CASH,CAZD,EAaAhB,CAAK,CAACiB,IAAN,GACNnC,CAAC,CAAC,2BAAD,CAAD,CAA+B,CAA/B,EAAkCoC,gBAAlC,CAAmD,OAAnD,CAA4D,UAAU,CAClE,GAAIC,CAAAA,CAAQ,CAAGrC,CAAC,CAAC,2BAAD,CAAD,CAA+B,CAA/B,CAAf,CACA,GAAIqC,CAAQ,CAACC,OAAb,CAAsB,CAClBD,CAAQ,CAACC,OAAT,GACH,CAFD,IAEO,CACHD,CAAQ,CAACC,OAAT,GACH,CACJ,CAPD,CAQG,CA3BD,CA4BH,CA9BE,CAgCV,CAlCC,CAAN","sourcesContent":["define(['jquery', 'core/modal_factory', 'core/templates', 'core/modal_events', 'core/ajax', 'core/notification', 'core/str'],\n    function ($, ModalFactory, Templates, ModalEvents, Ajax, Notification, Str) {\n        return {\n            init: function (courseid) {\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: Str.get_string('localvisibility_help', 'local_contactlist'),\n                    body: Templates.render('local_contactlist/studentsettingsmodal', {})\n                }).then(function (modal) {\n                    modal.getRoot().on(ModalEvents.save, function (e) {\n                        e.preventDefault();\n                        var updateval = $('#localcontactlist-visible').is(\":checked\") ? 1 : 0;\n                        Ajax.call([{\n                            methodname: 'localcontactlist_update_settings',\n                            args: {courseid: courseid, updateval: updateval},\n                            done: function () {\n                                modal.hide();\n                                location.reload();\n                            },\n                            fail: Notification.exception\n                        }]);\n                    });\n                    modal.show();\n              $('#local-contactlist-toggle')[0].addEventListener(\"click\", function(){\n                  var checkbox = $('#localcontactlist-visible')[0];\n                  if (checkbox.checked) {\n                      checkbox.checked = false;\n                  } else {\n                      checkbox.checked = true;\n                  }\n              });\n                });\n            }\n        };\n    });"],"file":"studentsettings.min.js"}